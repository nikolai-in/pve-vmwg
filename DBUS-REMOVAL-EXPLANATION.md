# –£–ø—Ä–æ—â–µ–Ω–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ D-Bus –∏–∑ vmwgnat

## ü§î –ü–æ—á–µ–º—É —É–±—Ä–∞–ª–∏ D-Bus?

### –í–∞–∂–Ω–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ:
**D-Bus –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–≥–æ Proxmox SDN —Å–µ—Ä–≤–∏—Å–∞ `dhcpsnat`, –∞ –ù–ï –¥–ª—è –Ω–∞—à–µ–≥–æ –∫–∞—Å—Ç–æ–º–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ `vmwgnat`**

## ‚úÖ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

### 1. **–£–¥–∞–ª–µ–Ω–∞ D-Bus –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**
- –£–±—Ä–∞–Ω–æ `enable-dbus=uk.org.thekelleys.dnsmasq.vmwgnat`
- –£–¥–∞–ª–µ–Ω D-Bus –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª
- –£–±—Ä–∞–Ω—ã –≤—Å–µ D-Bus handlers –∏ –∑–∞–¥–∞—á–∏

### 2. **–£–ø—Ä–æ—â–µ–Ω–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
```
–°—Ç–∞—Ä–∞—è —Å—Ö–µ–º–∞:
vmwgnat (–Ω–∞—à) ‚îÄ‚îÄ‚Üí D-Bus ‚îÄ‚îÄ‚Üí Proxmox
dhcpsnat (SDN) ‚îÄ‚îÄ‚Üí D-Bus ‚îÄ‚îÄ‚Üí Proxmox

–ù–æ–≤–∞—è —Å—Ö–µ–º–∞:
vmwgnat (–Ω–∞—à) ‚îÄ‚îÄ‚Üí –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ DHCP/DNS
dhcpsnat (SDN) ‚îÄ‚îÄ‚Üí D-Bus ‚îÄ‚îÄ‚Üí Proxmox (–∫–∞–∫ –∏ —Ä–∞–Ω—å—à–µ)
```

### 3. **–£–±—Ä–∞–Ω–∞ —Å–ª–æ–∂–Ω–æ—Å—Ç—å**
- –ù–µ—Ç XML –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
- –ù–µ—Ç D-Bus –ø–æ–ª–∏—Ç–∏–∫
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ù–µ—Ç enabler —Å–∫—Ä–∏–ø—Ç–æ–≤

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç —Ç–∞–∫ –∂–µ, –Ω–æ –ø—Ä–æ—â–µ:**
- DHCP –¥–ª—è –í–ú ‚úÖ
- DNS —Ä–µ–∑–æ–ª–≤–∏–Ω–≥ ‚úÖ  
- VPN –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è ‚úÖ
- –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å Proxmox SDN ‚úÖ

### ‚úÖ **–ë–µ–∑ –ø—Ä–æ–±–ª–µ–º:**
- –ù–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ D-Bus
- –ù–µ—Ç XML –æ—à–∏–±–æ–∫
- –ù–µ—Ç –ø—Ä–æ–±–ª–µ–º –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- –ü—Ä–æ—â–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

## üìã D-Bus –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –¥–ª—è:

1. **Proxmox SDN dhcpsnat** - –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ DHCP –∞—Ä–µ–Ω–¥–∞–º–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Proxmox API** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ MAC –∞–¥—Ä–µ—Å–æ–≤

## üí° –ù–∞—à vmwgnat –ù–ï –Ω—É–∂–¥–∞–µ—Ç—Å—è –≤ D-Bus –ø–æ—Ç–æ–º—É —á—Ç–æ:

- –ú—ã —É–ø—Ä–∞–≤–ª—è–µ–º DHCP —Å—Ç–∞—Ç–∏—á–Ω–æ —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- –£ –Ω–∞—Å –Ω–µ—Ç –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- –ú—ã –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä—É–µ–º—Å—è —Å Proxmox API –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è MAC
- –ù–∞—à–∞ –∑–∞–¥–∞—á–∞: –ø—Ä–æ—Å—Ç–∞—è VPN –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –¥–ª—è –í–ú

## üöÄ –¢–µ–ø–µ—Ä—å —Å–∏—Å—Ç–µ–º–∞:

1. **–ü—Ä–æ—â–µ** - –º–µ–Ω—å—à–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
2. **–ù–∞–¥–µ–∂–Ω–µ–µ** - –º–µ–Ω—å—à–µ —Ç–æ—á–µ–∫ –æ—Ç–∫–∞–∑–∞  
3. **–ü–æ–Ω—è—Ç–Ω–µ–µ** - –Ω–µ—Ç —Å–∫—Ä—ã—Ç—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–µ–µ** - –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É–µ—Ç —Å SDN

–≠—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ! üëç
